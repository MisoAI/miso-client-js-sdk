!function(){"use strict";const e={ignore:[],ignore_with:"_!i-£___£%_",strict:!1,tab_size:2,trim:[]},r=e=>/<(?<Element>[A-Za-z]+\b)[^>]*(?:.|\n)*?<\/{1}\k<Element>>/.test(e),t=(e,r)=>{if(!e||!r)throw Error("Both 'current' and 'updates' must be passed-in to mergeObjects()");let n;if(Array.isArray(e))n=structuredClone(e).concat(r);else if("object"==typeof e){n={...e};for(let e of Object.keys(r))n[e]="object"!=typeof r[e]?r[e]:t(n[e]||{},r[e])}return n},n=r=>{if("object"!=typeof r)throw Error("Config must be an object.");if(!(Object.hasOwn(r,"tab_size")||Object.hasOwn(r,"strict")||Object.hasOwn(r,"ignore")||Object.hasOwn(r,"trim")||Object.hasOwn(r,"ignore_with")))return e;let n=r.tab_size;if(n){if("number"!=typeof n)throw Error("Tab size must be a number.");if(!Number.isSafeInteger(n))throw Error(`Tab size ${n} is not safe. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger for more info.`);if(n=Math.floor(n),1>n||n>16)throw Error("Tab size out of range. Expecting 1 to 16.");r.tab_size=n}if(Object.hasOwn(r,"strict")&&"boolean"!=typeof r.strict)throw Error(`Strict config must be a boolean, not ${typeof r.strict}.`);if(Object.hasOwn(r,"ignore")&&(!Array.isArray(r.ignore)||!r.ignore?.every((e=>"string"==typeof e))))throw Error("Ignore config must be an array of strings.");if(Object.hasOwn(r,"ignore_with")&&"string"!=typeof r.ignore_with)throw Error(`Ignore_with config must be a string, not ${typeof r.ignore_with}.`);if(Object.hasOwn(r,"trim")&&(!Array.isArray(r.trim)||!r.trim?.every((e=>"string"==typeof e))))throw Error("Trim config must be an array of strings.");return((e,r)=>t(structuredClone(e),r))(e,r)},s=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],a=(e,t=!0)=>t&&!r(e)?e:(e=((e,r=!1)=>(e=e.replace(/<textarea[^>]*>((.|\n)*?)<\/textarea>/g,((e,r)=>e.replace(r,(e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\n/g,"&#10;").replace(/\r/g,"&#13;").replace(/\s/g,"&nbsp;"))))),r&&(e=e.replace(/<textarea[^>]*>((.|\n)*?)<\/textarea>/g,((e,r)=>(e=e.replace(r,(e=>e.replace(/\n|\t/g,"").replace(/[a-z]+="\s*"/gi,"").replace(/>\s+</g,"><").replace(/\s+/g," ")))).replace(/\s+/g," ").replace(/\s>/g,">").replace(/>\s/g,">").replace(/\s</g,"<").replace(/class=["']\s/g,(e=>e.replace(/\s/g,""))).replace(/(class=.*)\s(["'])/g,"$1$2")))),e))(e),e.replace(/\n|\t/g,"").replace(/[a-z]+="\s*"/gi,"").replace(/>\s+</g,"><").replace(/\s+/g," ").replace(/\s>/g,">").replace(/<\s\//g,"</").replace(/>\s/g,">").replace(/\s</g,"<").replace(/class=["']\s/g,(e=>e.replace(/\s/g,""))).replace(/(class=.*)\s(["'])/g,"$1$2"));let i,c;const o={line:[]},l=e=>(e=((e,t=!0)=>t&&!r(e)?e:e.replace(/<([a-zA-Z\-0-9]+)[^>]*>/g,((e,r)=>s.indexOf(r)>-1?(e.substring(0,e.length-1)+" />").replace(/\/\s\//g,"/"):e.replace(/[\s]?\/>/g,`></${r}>`))))(e,!1),c.length>0&&(e=((e,r)=>{for(let t=0;r.length>t;t++){const n=RegExp(`(<${r[t]}[^>]*>)\\s+`,"g"),s=RegExp(`\\s+(</${r[t]}>)`,"g");e=e.replace(n,"$1").replace(s,"$1")}return e})(e,c)),e=(e=>{o.line=[];let r=-1;return e.replace(/<[^>]*>/g,(e=>(o.line.push(e),r++,`\n[#-# : ${r} : ${e} : #-#]\n`)))})(e=a(e,!1))),g=(t,s)=>{if(!r(t))return t;const a=s?n(s):e;i=a.strict;const g=a.ignore.length>0;return c=a.trim,g&&(t=((e,r)=>{const t=r.ignore,n=r.ignore_with;for(let r=0;t.length>r;r++){const s=RegExp(`<${t[r]}[^>]*>((.|\n)*?)</${t[r]}>`,"g");e=e.replace(s,((e,r)=>e.replace(r,(e=>e.replace(/</g,"-"+n+"lt-").replace(/>/g,"-"+n+"gt-").replace(/\n/g,"-"+n+"nl-").replace(/\r/g,"-"+n+"cr-").replace(/\s/g,"-"+n+"ws-")))))}return e})(t,a)),t=((e,r)=>{let t="";o.line.forEach(((n,s)=>{e=e.replace(/\n+/g,"\n").replace(`[#-# : ${s} : ${n} : #-#]`,(e=>{let n=0;const a=`[#-# : ${s-1} : ${o.line[s-1]} : #-#]`;t+="0",0===s&&n++,e.indexOf(`#-# : ${s} : </`)>-1&&n++,a.indexOf("<!doctype")>-1&&n++,a.indexOf("\x3c!--")>-1&&n++,a.indexOf("/> : #-#")>-1&&n++,a.indexOf(`#-# : ${s-1} : </`)>-1&&n++;const c=t.length-n;if(t=t.substring(0,c),i&&e.indexOf("\x3c!--")>-1)return"";const l=e.replace(`[#-# : ${s} : `,"").replace(" : #-#]","");return l.padStart(l.length+r*c)}))})),e=e.replace(/>[^<]*?[^><\/\s][^<]*?<\/|>\s+[^><\s]|<script[^>]*>\s+<\/script>|<(\w+)>\s+<\/(\w+)|<([\w\-]+)[^>]*[^\/]>\s+<\/([\w\-]+)>/g,(e=>e.replace(/\n|\t|\s{2,}/g,""))),i&&(e=e.replace(/\s\/>/g,">"));const n=e.substring(0,1),s=e.substring(e.length-1);return"\n"===n&&(e=e.substring(1,e.length)),"\n"===s&&(e=e.substring(0,e.length-1)),e})(t=l(t),a.tab_size),g&&(t=((e,r)=>{const t=r.ignore,n=r.ignore_with;for(let r=0;t.length>r;r++){const s=RegExp(`<${t[r]}[^>]*>((.|\n)*?)</${t[r]}>`,"g");e=e.replace(s,((e,r)=>e.replace(r,(e=>e.replace(RegExp("-"+n+"lt-","g"),"<").replace(RegExp("-"+n+"gt-","g"),">").replace(RegExp("-"+n+"nl-","g"),"\n").replace(RegExp("-"+n+"cr-","g"),"\r").replace(RegExp("-"+n+"ws-","g")," ")))))}return e})(t,a)),t};async function p(){return new Promise((e=>(window.misocmd||(window.misocmd=[])).push((()=>e(window.MisoClient)))))}class u extends HTMLElement{static get tagName(){return"miso-sdk-html-template"}static get observedAttributes(){return["request"]}connectedCallback(){this.render()}attributeChangedCallback(e,r,t){r!==t&&this.render()}async render(){window.MisoClient?this._render():this._requestRender()}async _requestRender(){this._renderRequested||(this._renderRequested=!0,await p(),this._render())}async _render(){const e=this.getAttribute("request")||void 0,r=function(e,{minify:r=!1}={}){return e=a(e).trim(),r||(e=g(e)),(e=e.replace(/“\s+/g,"“").replace(/\s+”/g,"”")).replaceAll(/<\/miso-total>\s+/g,"</miso-total> ")}(Function(`return window.MisoClient.${e};`)()),t=window.Prism.highlight(r,window.Prism.languages.html,"html");this.innerHTML=`<pre class="language-html"><code class="language-html">${t}</code></pre>`}}function f(e){const{tagName:r}=e;customElements.get(r)||customElements.define(r,e);for(const e of document.querySelectorAll(r))customElements.upgrade(e)}const h=[u];for(const e of h)f(e);Object.assign(window,{getMisoClient:p})}();
